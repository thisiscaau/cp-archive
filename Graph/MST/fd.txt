#include<bits/stdc++.h>
using namespace std;
#define ll long long
#define fi first
#define se second
ll a[25],b[25];
ll n;
ll dp[21][1<<21];
signed main(){
    ios_base::sync_with_stdio(false);
    cin.tie(0);cout.tie(0);
    cin >> n;
    for (int i = 1 ; i <= n ; i++){
        cin >> a[i];
    }
    for (int i = 1 ; i <= n ; i++){
        cin >> b[i];
    }
    ll state = 1 << n;
    dp[0][0] = 1;
    for (int i = 1 ; i <= n ; i++){
        for (int mask = 0 ; mask < state ; mask++){
            if (_builtin_popcount(mask)!=i){
                continue;
            }
            for (int j = 0 ; j < n ; j++){
                if (mask&(1<<j) && b[j+1] >= a[i]){
                    dp[i][mask] += dp[i-1][mask ^ (1<<j)];
                }
            }
        }
    }
    cout << dp[n][state-1];
}